<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Auth Manager</title>
  <!-- Thêm Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
<div th:replace="~{home :: navbar}"></div> <!-- Sử dụng cú pháp đúng cho navbar -->
<div class="container-fluid">
  <!-- Layout của trang chính -->
  <div class="row">
    <!-- Sidebar -->
    <div class="col-md-3">
      <div class="list-group">
        <button onclick="window.location.href='/Dashboard'" class="list-group-item list-group-item-action">
          <i class="fa-solid fa-inbox fa-lg me-3"></i> Dashboard
        </button>
        <button onclick="window.location.href='/ShowAll'" class="list-group-item list-group-item-action active">
          <i class="fa-solid fa-envelope-open fa-lg me-3"></i> Show All
        </button>
        <button data-bs-toggle="modal" data-bs-target="#InsertModal" class="list-group-item list-group-item-action">
          <i class="fa-solid fa-envelope-open fa-lg me-3"></i> Insert
        </button>
        <button data-bs-toggle="modal" data-bs-target="#InsertModal" class="list-group-item list-group-item-action">
          <i class="fa-solid fa-envelope-open fa-lg me-3"></i> Call Manager
        </button>
      </div>
    </div>

    <!-- Nội dung chính -->
    <div class="col-md-9">
      <!-- Bảng hiển thị listAuth -->
      <table class="table">
        <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Item Name</th>
          <th scope="col">Department</th>
          <th scope="col">Actions</th>
        </tr>
        </thead>
        <tbody>
        <!-- Lặp qua danh sách auth -->
        <tr th:each="auth, stat : ${listAuth.content}">
          <th scope="row" th:text="${stat.index + 1}"></th>
          <td th:text="${auth.name}"></td>
          <td th:text="${auth.department}"></td>
          <td>
            <button type="button" th:data-id="${auth.id}" onclick="DeleteBtn(this.getAttribute('data-id'))" class="btn btn-primary">Delete</button>
            <button type="button" th:data-id="${auth.id}" onclick="EditBtn(this.getAttribute('data-id'))" class="btn btn-primary">Edit</button>
          </td>
        </tr>
        </tbody>
      </table>

      <!-- Pagination cho listAuth -->
      <nav aria-label="Page navigation" style="margin: 0 30%">
        <ul class="pagination">
          <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
            <a class="page-link" th:href="@{/GetTask/{id}/{departmentid}(id=${id}, departmentid=${departmentid}, page=${currentPage - 1}, size=${size})}">Previous</a>
          </li>
          <li class="page-item" th:each="i : ${#numbers.sequence(0, totalPages - 1)}" th:classappend="${i == currentPage} ? 'active'">
            <a class="page-link" th:href="@{/GetTask/{id}/{departmentid}(id=${id}, departmentid=${departmentid}, page=${i}, size=${size})}" th:text="${i + 1}"></a>
          </li>
          <li class="page-item" th:classappend="${currentPage == totalPages - 1} ? 'disabled'">
            <a class="page-link" th:href="@{/GetTask/{id}/{departmentid}(id=${id}, departmentid=${departmentid}, page=${currentPage + 1}, size=${size})}">Next</a>
          </li>
        </ul>
      </nav>


    </div>
  </div>
</div>

<script>
  function DeleteBtn(id) {
    if (confirm("Are you sure you want to delete this item?")) {
      window.location.href = "/delete/" + id;
    }
  }

  function EditBtn(id) {
    window.location.href = "/edit/" + id;
  }
</script>
</body>
</html>
